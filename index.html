<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¾ ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 100%);
            min-height: 100vh;
            padding: 10px;
            overflow-x: hidden;
        }

        .game-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
            border: 4px solid #333;
        }

        .screen {
            display: none;
            padding: 20px;
            min-height: 500px;
        }

        .screen.active {
            display: block;
        }

        .title-screen {
            text-align: center;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            padding: 40px 20px;
        }

        .title {
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .start-btn {
            padding: 15px 30px;
            font-size: 1.3em;
            background: #FF4757;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .world-map {
            background: #90EE90;
            position: relative;
            border-radius: 15px;
            overflow: hidden;
        }

        .map-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 1px;
            height: 400px;
        }

        .map-tile {
            background: #98FB98;
            border: 1px solid #90EE90;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.5em;
        }

        .map-tile:hover {
            background: #FFE4B5;
            transform: scale(1.1);
        }

        .grass { background: #98FB98; }
        .water { background: #87CEEB; }
        .mountain { background: #D2B48C; }
        .forest { background: #228B22; }

        .player {
            background: #FF69B4 !important;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .battle-screen {
            background: linear-gradient(180deg, #87CEEB 0%, #98FB98 100%);
            position: relative;
        }

        .battle-area {
            display: grid;
            grid-template-rows: 1fr 1fr 200px;
            height: 500px;
            gap: 10px;
        }

        .enemy-area, .player-area {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            background: rgba(255,255,255,0.3);
            border-radius: 15px;
        }

        .monster {
            text-align: center;
            padding: 20px;
            background: rgba(255,255,255,0.8);
            border-radius: 15px;
            border: 3px solid #333;
            min-width: 150px;
        }

        .monster-sprite {
            font-size: 4em;
            margin-bottom: 10px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .monster-name {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .monster-level {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .hp-bar {
            background: #ecf0f1;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
            border: 2px solid #bdc3c7;
        }

        .hp-fill {
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            height: 100%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8em;
        }

        .battle-menu {
            background: #34495e;
            border-radius: 15px;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .battle-btn {
            padding: 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.2s ease;
        }

        .battle-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .collection-screen {
            padding: 20px;
        }

        .collection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .collection-card {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #0984e3;
            transition: transform 0.2s ease;
        }

        .collection-card:hover {
            transform: scale(1.05);
        }

        .collection-card.empty {
            background: #ddd;
            color: #999;
            border-color: #ccc;
        }

        .nav-menu {
            background: #2c3e50;
            padding: 15px;
            display: flex;
            justify-content: space-around;
        }

        .nav-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .nav-btn.active {
            background: #e74c3c;
        }

        .message-box {
            background: #fff;
            border: 3px solid #333;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            min-height: 60px;
        }

        .catch-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            border: 3px solid #333;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            z-index: 1000;
            animation: catchSuccess 2s ease-out;
        }

        @keyframes catchSuccess {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ -->
        <div class="screen active" id="titleScreen">
            <div class="title-screen">
                <h1 class="title">ğŸ¾ ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼</h1>
                <p style="margin-bottom: 30px;">é‡ç”Ÿã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’æ•ã¾ãˆã¦ã€æœ€å¼·ã®ã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼ã«ãªã‚ã†ï¼</p>
                <button class="start-btn" onclick="startGame()">ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            </div>
        </div>

        <!-- ãƒ¯ãƒ¼ãƒ«ãƒ‰ãƒãƒƒãƒ— -->
        <div class="screen" id="worldScreen">
            <h2>ğŸ—ºï¸ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒãƒƒãƒ—</h2>
            <p>ç§»å‹•ã—ãŸã„å ´æ‰€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</p>
            <div class="world-map">
                <div class="map-grid" id="mapGrid"></div>
            </div>
            <div class="message-box" id="mapMessage">è‰ã‚€ã‚‰ã«å…¥ã‚‹ã¨é‡ç”Ÿã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã«é­é‡ã™ã‚‹ã‹ã‚‚...</div>
        </div>

        <!-- ãƒãƒˆãƒ«ç”»é¢ -->
        <div class="screen" id="battleScreen">
            <div class="battle-area">
                <div class="enemy-area">
                    <div class="monster" id="enemyMonster">
                        <div class="monster-sprite" id="enemySprite">ğŸ‰</div>
                        <div class="monster-name" id="enemyName">ãƒ¯ã‚¤ãƒ«ãƒ‰ãƒ‰ãƒ©ã‚´ãƒ³</div>
                        <div class="monster-level" id="enemyLevel">Lv.5</div>
                        <div class="hp-bar">
                            <div class="hp-fill" id="enemyHP" style="width: 100%">HP: 100/100</div>
                        </div>
                    </div>
                </div>

                <div class="player-area">
                    <div class="monster" id="playerMonster">
                        <div class="monster-sprite" id="playerSprite">ğŸ±</div>
                        <div class="monster-name" id="playerName">ãƒ•ã‚¡ã‚¤ã‚¢ã‚­ãƒ£ãƒƒãƒˆ</div>
                        <div class="monster-level" id="playerLevel">Lv.5</div>
                        <div class="hp-bar">
                            <div class="hp-fill" id="playerHP" style="width: 100%">HP: 80/80</div>
                        </div>
                    </div>
                </div>

                <div class="battle-menu">
                    <button class="battle-btn" onclick="attack()">âš”ï¸ ã“ã†ã’ã</button>
                    <button class="battle-btn" onclick="catchMonster()">ğŸ€ ã¤ã‹ã¾ãˆã‚‹</button>
                    <button class="battle-btn" onclick="useItem()">ğŸ’ ã‚¢ã‚¤ãƒ†ãƒ </button>
                    <button class="battle-btn" onclick="runAway()">ğŸ’¨ ã«ã’ã‚‹</button>
                </div>
            </div>
            <div class="message-box" id="battleMessage">é‡ç”Ÿã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãŒç¾ã‚ŒãŸï¼</div>
        </div>

        <!-- ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç”»é¢ -->
        <div class="screen" id="collectionScreen">
            <h2>ğŸ“š ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼å›³é‘‘</h2>
            <p>æ•ã¾ãˆãŸãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼: <span id="collectionCount">1</span> / 12</p>
            <div class="collection-grid" id="collectionGrid"></div>
        </div>

        <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
        <div class="nav-menu">
            <button class="nav-btn active" onclick="showScreen('worldScreen', this)">ğŸ—ºï¸ ãƒãƒƒãƒ—</button>
            <button class="nav-btn" onclick="showScreen('collectionScreen', this)">ğŸ“š å›³é‘‘</button>
            <button class="nav-btn" onclick="showStats()">ğŸ“Š ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</button>
        </div>
    </div>

    <script>
        // ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿
        const gameData = {
            player: {
                name: "ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼",
                monsters: [
                    { name: "ãƒ•ã‚¡ã‚¤ã‚¢ã‚­ãƒ£ãƒƒãƒˆ", sprite: "ğŸ±", level: 5, hp: 80, maxHP: 80, type: "fire" }
                ],
                currentMonster: 0,
                caughtMonsters: new Set()
            },
            wildMonsters: [
                { name: "ãƒ¯ã‚¤ãƒ«ãƒ‰ãƒ‰ãƒ©ã‚´ãƒ³", sprite: "ğŸ‰", level: 5, hp: 100, maxHP: 100, type: "dragon" },
                { name: "ã‚¢ã‚¯ã‚¢ãƒ•ã‚£ãƒƒã‚·ãƒ¥", sprite: "ğŸŸ", level: 3, hp: 60, maxHP: 60, type: "water" },
                { name: "ã‚°ãƒ©ã‚¹ãƒãƒ¼ãƒ‰", sprite: "ğŸ¦", level: 4, hp: 70, maxHP: 70, type: "grass" },
                { name: "ãƒ­ãƒƒã‚¯ã‚¿ãƒ¼ãƒˆãƒ«", sprite: "ğŸ¢", level: 6, hp: 120, maxHP: 120, type: "rock" },
                { name: "ã‚µãƒ³ãƒ€ãƒ¼ãƒã‚¦ã‚¹", sprite: "ğŸ­", level: 3, hp: 50, maxHP: 50, type: "electric" },
                { name: "ã‚¢ã‚¤ã‚¹ãƒšãƒ³ã‚®ãƒ³", sprite: "ğŸ§", level: 4, hp: 80, maxHP: 80, type: "ice" },
                { name: "ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆãƒ™ã‚¢", sprite: "ğŸ»", level: 7, hp: 140, maxHP: 140, type: "normal" },
                { name: "ãƒ‡ã‚¶ãƒ¼ãƒˆã‚¹ãƒãƒ¼ã‚¯", sprite: "ğŸ", level: 5, hp: 90, maxHP: 90, type: "poison" },
                { name: "ã‚¹ã‚«ã‚¤ã‚¤ãƒ¼ã‚°ãƒ«", sprite: "ğŸ¦…", level: 6, hp: 100, maxHP: 100, type: "flying" },
                { name: "ãƒŠã‚¤ãƒˆãƒãƒƒãƒˆ", sprite: "ğŸ¦‡", level: 4, hp: 65, maxHP: 65, type: "dark" },
                { name: "ã‚·ãƒ£ã‚¤ãƒ‹ãƒ¼ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³", sprite: "ğŸ¦„", level: 8, hp: 160, maxHP: 160, type: "fairy" }
            ],
            currentEnemy: null,
            playerPosition: { x: 3, y: 3 }
        };

        // æœ€åˆã«æ•ã¾ãˆãŸãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’å›³é‘‘ã«è¿½åŠ 
        gameData.player.caughtMonsters.add("ãƒ•ã‚¡ã‚¤ã‚¢ã‚­ãƒ£ãƒƒãƒˆ");

        function startGame() {
            generateMap();
            showScreen('worldScreen');
            updateCollection();
        }

        function generateMap() {
            const mapGrid = document.getElementById('mapGrid');
            mapGrid.innerHTML = '';
            
            const terrains = ['ğŸŒ±', 'ğŸŒŠ', 'ğŸ”ï¸', 'ğŸŒ²'];
            
            for (let y = 0; y < 8; y++) {
                for (let x = 0; x < 8; x++) {
                    const tile = document.createElement('div');
                    tile.className = 'map-tile';
                    
                    if (x === gameData.playerPosition.x && y === gameData.playerPosition.y) {
                        tile.className += ' player';
                        tile.textContent = 'ğŸ§™â€â™‚ï¸';
                    } else {
                        const terrain = terrains[Math.floor(Math.random() * terrains.length)];
                        tile.textContent = terrain;
                    }
                    
                    tile.onclick = () => movePlayer(x, y);
                    mapGrid.appendChild(tile);
                }
            }
        }

        function movePlayer(x, y) {
            gameData.playerPosition = { x, y };
            generateMap();
            
            // ãƒ©ãƒ³ãƒ€ãƒ ã‚¨ãƒ³ã‚«ã‚¦ãƒ³ãƒˆ
            if (Math.random() < 0.3) {
                startBattle();
            } else {
                document.getElementById('mapMessage').textContent = 'ä½•ã‚‚èµ·ã“ã‚‰ãªã‹ã£ãŸ...';
            }
        }

        function startBattle() {
            const randomMonster = gameData.wildMonsters[Math.floor(Math.random() * gameData.wildMonsters.length)];
            gameData.currentEnemy = { ...randomMonster };
            
            updateBattleDisplay();
            showScreen('battleScreen');
            document.getElementById('battleMessage').textContent = `é‡ç”Ÿã®${gameData.currentEnemy.name}ãŒç¾ã‚ŒãŸï¼`;
        }

        function updateBattleDisplay() {
            const player = gameData.player.monsters[gameData.player.currentMonster];
            const enemy = gameData.currentEnemy;
            
            // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼
            document.getElementById('playerSprite').textContent = player.sprite;
            document.getElementById('playerName').textContent = player.name;
            document.getElementById('playerLevel').textContent = `Lv.${player.level}`;
            document.getElementById('playerHP').textContent = `HP: ${player.hp}/${player.maxHP}`;
            document.getElementById('playerHP').style.width = `${(player.hp / player.maxHP) * 100}%`;
            
            // æ•µãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼
            document.getElementById('enemySprite').textContent = enemy.sprite;
            document.getElementById('enemyName').textContent = enemy.name;
            document.getElementById('enemyLevel').textContent = `Lv.${enemy.level}`;
            document.getElementById('enemyHP').textContent = `HP: ${enemy.hp}/${enemy.maxHP}`;
            document.getElementById('enemyHP').style.width = `${(enemy.hp / enemy.maxHP) * 100}%`;
        }

        function attack() {
            const player = gameData.player.monsters[gameData.player.currentMonster];
            const enemy = gameData.currentEnemy;
            
            // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æ”»æ’ƒ
            const playerDamage = Math.floor(Math.random() * 20) + 10;
            enemy.hp = Math.max(0, enemy.hp - playerDamage);
            
            document.getElementById('battleMessage').textContent = `${player.name}ã®æ”»æ’ƒï¼ ${enemy.name}ã«${playerDamage}ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼`;
            
            updateBattleDisplay();
            
            if (enemy.hp <= 0) {
                setTimeout(() => {
                    document.getElementById('battleMessage').textContent = `${enemy.name}ã‚’å€’ã—ãŸï¼`;
                    setTimeout(() => showScreen('worldScreen'), 2000);
                }, 1000);
                return;
            }
            
            // æ•µã®æ”»æ’ƒ
            setTimeout(() => {
                const enemyDamage = Math.floor(Math.random() * 15) + 5;
                player.hp = Math.max(0, player.hp - enemyDamage);
                
                document.getElementById('battleMessage').textContent = `${enemy.name}ã®æ”»æ’ƒï¼ ${player.name}ã«${enemyDamage}ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼`;
                updateBattleDisplay();
                
                if (player.hp <= 0) {
                    setTimeout(() => {
                        document.getElementById('battleMessage').textContent = `${player.name}ã¯å€’ã‚ŒãŸ... ãƒã‚±ãƒ¢ãƒ³ã‚»ãƒ³ã‚¿ãƒ¼ã«é‹ã°ã‚ŒãŸã€‚`;
                        player.hp = player.maxHP; // å›å¾©
                        setTimeout(() => showScreen('worldScreen'), 2000);
                    }, 1000);
                }
            }, 1500);
        }

        function catchMonster() {
            const enemy = gameData.currentEnemy;
            const catchRate = Math.max(0.1, (enemy.maxHP - enemy.hp) / enemy.maxHP);
            
            document.getElementById('battleMessage').textContent = 'ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãƒœãƒ¼ãƒ«ã‚’æŠ•ã’ãŸ...';
            
            setTimeout(() => {
                if (Math.random() < catchRate) {
                    // æ•ç²æˆåŠŸ
                    gameData.player.caughtMonsters.add(enemy.name);
                    
                    // æ•ç²ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                    const catchAnimation = document.createElement('div');
                    catchAnimation.className = 'catch-animation';
                    catchAnimation.innerHTML = `
                        <div style="font-size: 3em;">${enemy.sprite}</div>
                        <h2>æ•ç²æˆåŠŸï¼</h2>
                        <p>${enemy.name}ã‚’æ•ã¾ãˆãŸï¼</p>
                    `;
                    document.body.appendChild(catchAnimation);
                    
                    setTimeout(() => {
                        document.body.removeChild(catchAnimation);
                        updateCollection();
                        showScreen('worldScreen');
                    }, 2000);
                } else {
                    document.getElementById('battleMessage').textContent = `${enemy.name}ã¯é€ƒã’å‡ºã—ãŸï¼`;
                    setTimeout(() => showScreen('worldScreen'), 2000);
                }
            }, 1000);
        }

        function useItem() {
            const player = gameData.player.monsters[gameData.player.currentMonster];
            player.hp = Math.min(player.maxHP, player.hp + 30);
            updateBattleDisplay();
            document.getElementById('battleMessage').textContent = `ã‚­ã‚ºãã™ã‚Šã‚’ä½¿ã£ãŸï¼ ${player.name}ã®HPãŒå›å¾©ã—ãŸï¼`;
        }

        function runAway() {
            document.getElementById('battleMessage').textContent = 'é€ƒã’å‡ºã—ãŸï¼';
            setTimeout(() => showScreen('worldScreen'), 1000);
        }

        function updateCollection() {
            const grid = document.getElementById('collectionGrid');
            grid.innerHTML = '';
            
            gameData.wildMonsters.forEach(monster => {
                const card = document.createElement('div');
                card.className = 'collection-card';
                
                if (gameData.player.caughtMonsters.has(monster.name)) {
                    card.innerHTML = `
                        <div style="font-size: 2em;">${monster.sprite}</div>
                        <div style="font-weight: bold;">${monster.name}</div>
                        <div style="font-size: 0.8em;">Lv.${monster.level}</div>
                    `;
                } else {
                    card.className += ' empty';
                    card.innerHTML = `
                        <div style="font-size: 2em;">â“</div>
                        <div>???</div>
                    `;
                }
                
                grid.appendChild(card);
            });
            
            // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æœ€åˆã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚‚è¿½åŠ 
            document.getElementById('collectionCount').textContent = gameData.player.caughtMonsters.size;
        }

        function showScreen(screenId, button = null) {
            // å…¨ç”»é¢ã‚’éè¡¨ç¤º
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // æŒ‡å®šç”»é¢ã‚’è¡¨ç¤º
            document.getElementById(screenId).classList.add('active');
            
            // ãƒŠãƒ“ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹æ›´æ–°
            if (button) {
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
            }
        }

        function showStats() {
            alert(`ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼: ${gameData.player.name}\næ•ç²ã—ãŸãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼: ${gameData.player.caughtMonsters.size} / ${gameData.wildMonsters.length + 1}\n\nç¾åœ¨ã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼: ${gameData.player.monsters[0].name} (Lv.${gameData.player.monsters[0].level})`);
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateCollection();
        });
    </script>
</body>
</html>
