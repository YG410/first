<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêæ „É¢„É≥„Çπ„Çø„Éº„Ç≥„É¨„ÇØ„Çø„Éº</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 100%);
            min-height: 100vh;
            padding: 10px;
            overflow-x: hidden;
        }

        .game-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
            border: 4px solid #333;
        }

        .screen {
            display: none;
            padding: 20px;
            min-height: 500px;
        }

        .screen.active {
            display: block;
        }

        .title-screen {
            text-align: center;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            padding: 40px 20px;
        }

        .title {
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .start-btn {
            padding: 15px 30px;
            font-size: 1.3em;
            background: #FF4757;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .world-map {
            background: #90EE90;
            position: relative;
            border-radius: 15px;
            overflow: hidden;
        }

        .map-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 1px;
            height: 400px;
        }

        .map-tile {
            background: #98FB98;
            border: 1px solid #90EE90;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.5em;
        }

        .map-tile:hover {
            background: #FFE4B5;
            transform: scale(1.1);
        }

        .grass { background: #98FB98; }
        .water { background: #87CEEB; }
        .mountain { background: #D2B48C; }
        .forest { background: #228B22; }

        .player {
            background: #FF69B4 !important;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .battle-screen {
            background: linear-gradient(180deg, #87CEEB 0%, #98FB98 100%);
            position: relative;
        }

        .battle-area {
            display: grid;
            grid-template-rows: 1fr 1fr 200px;
            height: 500px;
            gap: 10px;
        }

        .enemy-area, .player-area {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            background: rgba(255,255,255,0.3);
            border-radius: 15px;
        }

        .monster {
            text-align: center;
            padding: 20px;
            background: rgba(255,255,255,0.8);
            border-radius: 15px;
            border: 3px solid #333;
            min-width: 150px;
        }

        .monster-sprite {
            font-size: 4em;
            margin-bottom: 10px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .monster-name {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .monster-level {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .hp-bar {
            background: #ecf0f1;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
            border: 2px solid #bdc3c7;
        }

        .hp-fill {
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            height: 100%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8em;
        }

        .battle-menu {
            background: #34495e;
            border-radius: 15px;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .battle-btn {
            padding: 15px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.2s ease;
        }

        .battle-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .collection-screen {
            padding: 20px;
        }

        .collection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .collection-card {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #0984e3;
            transition: transform 0.2s ease;
        }

        .collection-card:hover {
            transform: scale(1.05);
        }

        .collection-card.empty {
            background: #ddd;
            color: #999;
            border-color: #ccc;
        }

        .nav-menu {
            background: #2c3e50;
            padding: 15px;
            display: flex;
            justify-content: space-around;
        }

        .nav-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .nav-btn.active {
            background: #e74c3c;
        }

        .message-box {
            background: #fff;
            border: 3px solid #333;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            min-height: 60px;
        }

        .catch-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            border: 3px solid #333;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            z-index: 1000;
            animation: catchSuccess 2s ease-out;
        }

        @keyframes catchSuccess {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- „Çø„Ç§„Éà„É´ÁîªÈù¢ -->
        <div class="screen active" id="titleScreen">
            <div class="title-screen">
                <h1 class="title">üêæ „É¢„É≥„Çπ„Çø„Éº„Ç≥„É¨„ÇØ„Çø„Éº</h1>
                <p style="margin-bottom: 30px;">ÈáéÁîü„ÅÆ„É¢„É≥„Çπ„Çø„Éº„ÇíÊçï„Åæ„Åà„Å¶„ÄÅÊúÄÂº∑„ÅÆ„Ç≥„É¨„ÇØ„Çø„Éº„Å´„Å™„Çç„ÅÜÔºÅ</p>
                <button class="start-btn" onclick="startGame()">„Ç≤„Éº„É†„Çπ„Çø„Éº„Éà</button>
            </div>
        </div>

        <!-- „ÉØ„Éº„É´„Éâ„Éû„ÉÉ„Éó -->
        <div class="screen" id="worldScreen">
            <h2>üó∫Ô∏è „Éï„Ç£„Éº„É´„Éâ„Éû„ÉÉ„Éó</h2>
            <p>ÁßªÂãï„Åó„Åü„ÅÑÂ†¥ÊâÄ„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
            <div class="world-map">
                <div class="map-grid" id="mapGrid"></div>
            </div>
            <div class="message-box" id="mapMessage">Ëçâ„ÇÄ„Çâ„Å´ÂÖ•„Çã„Å®ÈáéÁîü„ÅÆ„É¢„É≥„Çπ„Çø„Éº„Å´ÈÅ≠ÈÅá„Åô„Çã„Åã„ÇÇ...</div>
        </div>

        <!-- „Éê„Éà„É´ÁîªÈù¢ -->
        <div class="screen" id="battleScreen">
            <div class="battle-area">
                <div class="enemy-area">
                    <div class="monster" id="enemyMonster">
                        <div class="monster-sprite" id="enemySprite">üêâ</div>
                        <div class="monster-name" id="enemyName">„ÉØ„Ç§„É´„Éâ„Éâ„É©„Ç¥„É≥</div>
                        <div class="monster-level" id="enemyLevel">Lv.5</div>
                        <div class="hp-bar">
                            <div class="hp-fill" id="enemyHP" style="width: 100%">HP: 100/100</div>
                        </div>
                    </div>
                </div>

                <div class="player-area">
                    <div class="monster" id="playerMonster">
                        <div class="monster-sprite" id="playerSprite">üê±</div>
                        <div class="monster-name" id="playerName">„Éï„Ç°„Ç§„Ç¢„Ç≠„É£„ÉÉ„Éà</div>
                        <div class="monster-level" id="playerLevel">Lv.5</div>
                        <div class="hp-bar">
                            <div class="hp-fill" id="playerHP" style="width: 100%">HP: 80/80</div>
                        </div>
                    </div>
                </div>

                <div class="battle-menu">
                    <button class="battle-btn" onclick="attack()">‚öîÔ∏è „Åì„ÅÜ„Åí„Åç</button>
                    <button class="battle-btn" onclick="catchMonster()">üèÄ „Å§„Åã„Åæ„Åà„Çã</button>
                    <button class="battle-btn" onclick="useItem()">üéí „Ç¢„Ç§„ÉÜ„É†</button>
                    <button class="battle-btn" onclick="runAway()">üí® „Å´„Åí„Çã</button>
                </div>
            </div>
            <div class="message-box" id="battleMessage">ÈáéÁîü„ÅÆ„É¢„É≥„Çπ„Çø„Éº„ÅåÁèæ„Çå„ÅüÔºÅ</div>
        </div>

        <!-- „Ç≥„É¨„ÇØ„Ç∑„Éß„É≥ÁîªÈù¢ -->
        <div class="screen" id="collectionScreen">
            <h2>üìö „É¢„É≥„Çπ„Çø„ÉºÂõ≥Èëë</h2>
            <p>Êçï„Åæ„Åà„Åü„É¢„É≥„Çπ„Çø„Éº: <span id="collectionCount">1</span> / 12</p>
            <div class="collection-grid" id="collectionGrid"></div>
        </div>

        <!-- „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„É°„Éã„É•„Éº -->
        <div class="nav-menu">
            <button class="nav-btn active" onclick="showScreen('worldScreen', this)">üó∫Ô∏è „Éû„ÉÉ„Éó</button>
            <button class="nav-btn" onclick="showScreen('collectionScreen', this)">üìö Âõ≥Èëë</button>
            <button class="nav-btn" onclick="showStats()">üìä „Çπ„ÉÜ„Éº„Çø„Çπ</button>
        </div>
    </div>

    <script>
        // „Ç≤„Éº„É†„Éá„Éº„Çø
        const gameData = {
            player: {
                name: "„Éà„É¨„Éº„Éä„Éº",
                monsters: [
                    { name: "„Éï„Ç°„Ç§„Ç¢„Ç≠„É£„ÉÉ„Éà", sprite: "üê±", level: 5, hp: 80, maxHP: 80, type: "fire" }
                ],
                currentMonster: 0,
                caughtMonsters: new Set()
            },
            wildMonsters: [
                { name: "„ÉØ„Ç§„É´„Éâ„Éâ„É©„Ç¥„É≥", sprite: "üêâ", level: 5, hp: 100, maxHP: 100, type: "dragon" },
                { name: "„Ç¢„ÇØ„Ç¢„Éï„Ç£„ÉÉ„Ç∑„É•", sprite: "üêü", level: 3, hp: 60, maxHP: 60, type: "water" },
                { name: "„Ç∞„É©„Çπ„Éê„Éº„Éâ", sprite: "üê¶", level: 4, hp: 70, maxHP: 70, type: "grass" },
                { name: "„É≠„ÉÉ„ÇØ„Çø„Éº„Éà„É´", sprite: "üê¢", level: 6, hp: 120, maxHP: 120, type: "rock" },
                { name: "„Çµ„É≥„ÉÄ„Éº„Éû„Ç¶„Çπ", sprite: "üê≠", level: 3, hp: 50, maxHP: 50, type: "electric" },
                { name: "„Ç¢„Ç§„Çπ„Éö„É≥„ÇÆ„É≥", sprite: "üêß", level: 4, hp: 80, maxHP: 80, type: "ice" },
                { name: "„Éï„Ç©„É¨„Çπ„Éà„Éô„Ç¢", sprite: "üêª", level: 7, hp: 140, maxHP: 140, type: "normal" },
                { name: "„Éá„Ç∂„Éº„Éà„Çπ„Éç„Éº„ÇØ", sprite: "üêç", level: 5, hp: 90, maxHP: 90, type: "poison" },
                { name: "„Çπ„Ç´„Ç§„Ç§„Éº„Ç∞„É´", sprite: "ü¶Ö", level: 6, hp: 100, maxHP: 100, type: "flying" },
                { name: "„Éä„Ç§„Éà„Éê„ÉÉ„Éà", sprite: "ü¶á", level: 4, hp: 65, maxHP: 65, type: "dark" },
                { name: "„Ç∑„É£„Ç§„Éã„Éº„É¶„Éã„Ç≥„Éº„É≥", sprite: "ü¶Ñ", level: 8, hp: 160, maxHP: 160, type: "fairy" }
            ],
            currentEnemy: null,
            playerPosition: { x: 3, y: 3 }
        };

        // ÊúÄÂàù„Å´Êçï„Åæ„Åà„Åü„É¢„É≥„Çπ„Çø„Éº„ÇíÂõ≥Èëë„Å´ËøΩÂä†
        gameData.player.caughtMonsters.add("„Éï„Ç°„Ç§„Ç¢„Ç≠„É£„ÉÉ„Éà");

        function startGame() {
            generateMap();
            showScreen('worldScreen');
            updateCollection();
        }

        function generateMap() {
            const mapGrid = document.getElementById('mapGrid');
            mapGrid.innerHTML = '';
            
            const terrains = ['üå±', 'üåä', 'üèîÔ∏è', 'üå≤'];
            
            for (let y = 0; y < 8; y++) {
                for (let x = 0; x < 8; x++) {
                    const tile = document.createElement('div');
                    tile.className = 'map-tile';
                    
                    if (x === gameData.playerPosition.x && y === gameData.playerPosition.y) {
                        tile.className += ' player';
                        tile.textContent = 'üßô‚Äç‚ôÇÔ∏è';
                    } else {
                        const terrain = terrains[Math.floor(Math.random() * terrains.length)];
                        tile.textContent = terrain;
                    }
                    
                    tile.onclick = () => movePlayer(x, y);
                    mapGrid.appendChild(tile);
                }
            }
        }

        function movePlayer(x, y) {
            gameData.playerPosition = { x, y };
            generateMap();
            
            // „É©„É≥„ÉÄ„É†„Ç®„É≥„Ç´„Ç¶„É≥„Éà
            if (Math.random() < 0.3) {
                startBattle();
            } else {
                document.getElementById('mapMessage').textContent = '‰Ωï„ÇÇËµ∑„Åì„Çâ„Å™„Åã„Å£„Åü...';
            }
        }

        function startBattle() {
            const randomMonster = gameData.wildMonsters[Math.floor(Math.random() * gameData.wildMonsters.length)];
            gameData.currentEnemy = { ...randomMonster };
            
            updateBattleDisplay();
            showScreen('battleScreen');
            document.getElementById('battleMessage').textContent = `ÈáéÁîü„ÅÆ${gameData.currentEnemy.name}„ÅåÁèæ„Çå„ÅüÔºÅ`;
        }

        function updateBattleDisplay() {
            const player = gameData.player.monsters[gameData.player.currentMonster];
            const enemy = gameData.currentEnemy;
            
            // „Éó„É¨„Ç§„É§„Éº„É¢„É≥„Çπ„Çø„Éº
            document.getElementById('playerSprite').textContent = player.sprite;
            document.getElementById('playerName').textContent = player.name;
            document.getElementById('playerLevel').textContent = `Lv.${player.level}`;
            document.getElementById('playerHP').textContent = `HP: ${player.hp}/${player.maxHP}`;
            document.getElementById('playerHP').style.width = `${(player.hp / player.maxHP) * 100}%`;
            
            // Êïµ„É¢„É≥„Çπ„Çø„Éº
            document.getElementById('enemySprite').textContent = enemy.sprite;
            document.getElementById('enemyName').textContent = enemy.name;
            document.getElementById('enemyLevel').textContent = `Lv.${enemy.level}`;
            document.getElementById('enemyHP').textContent = `HP: ${enemy.hp}/${enemy.maxHP}`;
            document.getElementById('enemyHP').style.width = `${(enemy.hp / enemy.maxHP) * 100}%`;
        }

        function attack() {
            const player = gameData.player.monsters[gameData.player.currentMonster];
            const enemy = gameData.currentEnemy;
            
            // „Éó„É¨„Ç§„É§„Éº„ÅÆÊîªÊíÉ
            const playerDamage = Math.floor(Math.random() * 20) + 10;
            enemy.hp = Math.max(0, enemy.hp - playerDamage);
            
            document.getElementById('battleMessage').textContent = `${player.name}„ÅÆÊîªÊíÉÔºÅ ${enemy.name}„Å´${playerDamage}„ÅÆ„ÉÄ„É°„Éº„Ç∏ÔºÅ`;
            
            updateBattleDisplay();
            
            if (enemy.hp <= 0) {
                setTimeout(() => {
                    document.getElementById('battleMessage').textContent = `${enemy.name}„ÇíÂÄí„Åó„ÅüÔºÅ`;
                    setTimeout(() => showScreen('worldScreen'), 2000);
                }, 1000);
                return;
            }
            
            // Êïµ„ÅÆÊîªÊíÉ
            setTimeout(() => {
                const enemyDamage = Math.floor(Math.random() * 15) + 5;
                player.hp = Math.max(0, player.hp - enemyDamage);
                
                document.getElementById('battleMessage').textContent = `${enemy.name}„ÅÆÊîªÊíÉÔºÅ ${player.name}„Å´${enemyDamage}„ÅÆ„ÉÄ„É°„Éº„Ç∏ÔºÅ`;
                updateBattleDisplay();
                
                if (player.hp <= 0) {
                    setTimeout(() => {
                        document.getElementById('battleMessage').textContent = `${player.name}„ÅØÂÄí„Çå„Åü... „Éù„Ç±„É¢„É≥„Çª„É≥„Çø„Éº„Å´ÈÅã„Å∞„Çå„Åü„ÄÇ`;
                        player.hp = player.maxHP; // ÂõûÂæ©
                        setTimeout(() => showScreen('worldScreen'), 2000);
                    }, 1000);
                }
            }, 1500);
        }

        function catchMonster() {
            const enemy = gameData.currentEnemy;
            const catchRate = Math.max(0.1, (enemy.maxHP - enemy.hp) / enemy.maxHP);
            
            document.getElementById('battleMessage').textContent = '„É¢„É≥„Çπ„Çø„Éº„Éú„Éº„É´„ÇíÊäï„Åí„Åü...';
            
            setTimeout(() => {
                if (Math.random() < catchRate) {
                    // ÊçïÁç≤ÊàêÂäü
                    gameData.player.caughtMonsters.add(enemy.name);
                    
                    // ÊçïÁç≤„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
                    const catchAnimation = document.createElement('div');
                    catchAnimation.className = 'catch-animation';
                    catchAnimation.innerHTML = `
                        <div style="font-size: 3em;">${enemy.sprite}</div>
                        <h2>ÊçïÁç≤ÊàêÂäüÔºÅ</h2>
                        <p>${enemy.name}„ÇíÊçï„Åæ„Åà„ÅüÔºÅ</p>
                    `;
                    document.body.appendChild(catchAnimation);
                    
                    setTimeout(() => {
                        document.body.removeChild(catchAnimation);
                        updateCollection();
                        showScreen('worldScreen');
                    }, 2000);
                } else {
                    document.getElementById('battleMessage').textContent = `${enemy.name}„ÅØÈÄÉ„ÅíÂá∫„Åó„ÅüÔºÅ`;
                    setTimeout(() => showScreen('worldScreen'), 2000);
                }
            }, 1000);
        }

        function useItem() {
            const player = gameData.player.monsters[gameData.player.currentMonster];
            player.hp = Math.min(player.maxHP, player.hp + 30);
            updateBattleDisplay();
            document.getElementById('battleMessage').textContent = `„Ç≠„Ç∫„Åê„Åô„Çä„Çí‰Ωø„Å£„ÅüÔºÅ ${player.name}„ÅÆHP„ÅåÂõûÂæ©„Åó„ÅüÔºÅ`;
        }

        function runAway() {
            document.getElementById('battleMessage').textContent = 'ÈÄÉ„ÅíÂá∫„Åó„ÅüÔºÅ';
            setTimeout(() => showScreen('worldScreen'), 1000);
        }

        function updateCollection() {
            const grid = document.getElementById('collectionGrid');
            grid.innerHTML = '';
            
            gameData.wildMonsters.forEach(monster => {
                const card = document.createElement('div');
                card.className = 'collection-card';
                
                if (gameData.player.caughtMonsters.has(monster.name)) {
                    card.innerHTML = `
                        <div style="font-size: 2em;">${monster.sprite}</div>
                        <div style="font-weight: bold;">${monster.name}</div>
                        <div style="font-size: 0.8em;">Lv.${monster.level}</div>
                    `;
                } else {
                    card.className += ' empty';
                    card.innerHTML = `
                        <div style="font-size: 2em;">‚ùì</div>
                        <div>???</div>
                    `;
                }
                
                grid.appendChild(card);
            });
            
            // „Éó„É¨„Ç§„É§„Éº„ÅÆÊúÄÂàù„ÅÆ„É¢„É≥„Çπ„Çø„Éº„ÇÇËøΩÂä†
            document.getElementById('collectionCount').textContent = gameData.player.caughtMonsters.size;
        }

        function showScreen(screenId, button = null) {
            // ÂÖ®ÁîªÈù¢„ÇíÈùûË°®Á§∫
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // ÊåáÂÆöÁîªÈù¢„ÇíË°®Á§∫
            document.getElementById(screenId).classList.add('active');
            
            // „Éä„Éì„Éú„Çø„É≥„ÅÆÁä∂ÊÖãÊõ¥Êñ∞
            if (button) {
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
            }
        }

        function showStats() {
            alert(`„Éà„É¨„Éº„Éä„Éº: ${gameData.player.name}\nÊçïÁç≤„Åó„Åü„É¢„É≥„Çπ„Çø„Éº: ${gameData.player.caughtMonsters.size} / ${gameData.wildMonsters.length + 1}\n\nÁèæÂú®„ÅÆ„Éë„Éº„Éà„Éä„Éº: ${gameData.player.monsters[0].name} (Lv.${gameData.player.monsters[0].level})`);
        }

        // ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            updateCollection();
        });
    </script>
</body>
</html>
